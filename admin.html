<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Admin â€“ Joker Bet</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>ðŸ”’ Dashboard Admin</h1>

<input type="password" id="pass" placeholder="Mot de passe admin">
<button onclick="login()">AccÃ©der</button>

<div id="admin" style="display:none"></div>

<script src="config.js"></script>
<script>
const ADMIN_PASS = "admin123"; // RP ONLY

function login(){
  if(document.getElementById("pass").value === ADMIN_PASS){
    document.getElementById("admin").style.display="block";
    loadAdmin();
  } else {
    alert("AccÃ¨s refusÃ©");
  }
}

async function loadAdmin(){

  const query = `
    SELECT B, SUM(E), SUM(F)
    GROUP BY B
    ORDER BY SUM(E) DESC
  `;

  const url = `https://docs.google.com/spreadsheets/d/${CONFIG.SHEET_ID}/gviz/tq?sheet=PARIS&tq=${encodeURIComponent(query)}`;

  const res = await fetch(url);
  const text = await res.text();
  const json = JSON.parse(text.substr(47).slice(0, -2));
  const rows = json.table.rows;

  let html = "<h2>ðŸ“Š RÃ©sumÃ© des mises</h2>";

  rows.forEach(r=>{
    html += `
      <div class="card">
        <b>${r.c[0].v}</b><br>
        Mise totale : ${r.c[1].v}$<br>
        Gain potentiel : ${r.c[2].v}$
      </div>
    `;
  });

  document.getElementById("admin").innerHTML = html;
}
</script>

</body>
</html>
